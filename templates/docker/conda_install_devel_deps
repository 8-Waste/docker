COPY supportfiles/.condarc /opt/conda/.condarc

# Env debug info
RUN source activate rapids \
    && env \
    && conda info \
    && conda config --show-sources \
    && conda list --show-channel-urls

# Setup rapids build env from conda meta-pkg & ucx-py & libcumlprims
RUN ${RAPIDS_DIR}/utils/condaretry install -y -n rapids --freeze-installed rapids-build-env ucx-py libcumlprims

# Install pkgs for doc builds
RUN ${RAPIDS_DIR}/utils/condaretry install -y -n rapids --freeze-installed \
        sphinx \
        sphinx_rtd_theme \
        numpydoc \
        sphinxcontrib-websupport \
        nbsphinx \
        recommonmark \
        doxygen \
        "pandoc<=2.0.0" \
    && pip install sphinx-markdown-tables

# Env debug info
RUN source activate rapids \
    && env \
    && conda info \
    && conda config --show-sources \
    && conda list --show-channel-urls
